import{u as O,a as W,I as m,J as x,j as e,S as $,K as p}from"./index-D07yTCoG.js";import{r as T}from"./router-LUHdcDgl.js";import{M as i}from"./MediaGrid-Dzz1wboJ.js";import{I as g}from"./InfiniteScroll-DjOmtQht.js";import{A as z}from"./AnimeContinueWatching-D3pgvTJ5.js";import"./vendor-gH-7aFTg.js";import"./redux-uMWmO1IK.js";import"./utils-COe-vthL.js";import"./formatNumber-CanhB8v4.js";import"./formatTime-BiH8Yqa9.js";import"./LazyImage-Cgmg7ZD0.js";const ee=()=>{const r=O(),{topAiring:a,topAiringLoading:o,topAiringError:h,topAiringNextPage:u,topAiringHasNextPage:L,recentEpisodes:j,recentEpisodesLoading:n,recentEpisodesError:b,recentEpisodesNextPage:y,recentEpisodesHasNextPage:C,topAnime:d,topAnimeLoading:l,topAnimeError:f,topAnimeNextPage:N,topAnimeHasNextPage:P,recommendations:A,recommendationsLoading:S,recommendationsError:k}=W(t=>t.anime),[s,R]=T.useState("trending");T.useEffect(()=>{a.length===0&&r(m(1)),d.length===0&&r(x({page:1,filter:"bypopularity"}))},[r,a.length,d.length]);const D=()=>{u&&!o&&r(m(u))},B=()=>{y&&!n&&r(p({page:y}))},I=()=>{N&&!l&&r(x({page:N,filter:"bypopularity"}))},v=t=>{R(t),t==="recent"&&j.length===0&&r(p({page:1}))},c=t=>({id:t.id,title:t.title,image:t.image,url:t.url,type:"anime",genres:t.genres,description:t.description,status:t.status,totalEpisodes:t.totalEpisodes,subOrDub:t.subOrDub,score:t.score,scoredBy:t.scoredBy,rank:t.rank,popularity:t.popularity,members:t.members,favorites:t.favorites,year:t.year,season:t.season,duration:t.duration,rating:t.rating,studios:t.studios,producers:t.producers,otherName:t.otherName,animeType:t.type,releaseDate:t.releaseDate}),F=t=>({id:t.episodeId,title:t.title,image:t.image,url:t.url,type:"anime"}),E=a.map(c),M=j.map(F),w=d.map(c),H=A.map(c);return h?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-red-100 dark:bg-red-900 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-12 h-12 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:h}),e.jsx("button",{onClick:()=>r(m(1)),className:"btn-primary",children:"Try again"})]}):e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:"Anime"}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Search Anime"}),e.jsx("div",{className:"max-w-2xl",children:e.jsx($,{searchPath:"/anime/search"})})]}),e.jsx(z,{limit:8}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Top Anime"}),f?e.jsxs("div",{className:"text-center py-8",children:[e.jsxs("p",{className:"text-red-600 dark:text-red-400",children:["Failed to load top anime: ",f]}),e.jsx("button",{onClick:()=>r(x({page:1,filter:"bypopularity"})),className:"mt-4 btn-primary",children:"Try again"})]}):e.jsx(g,{onLoadMore:I,hasMore:P,loading:l,children:e.jsx(i,{media:w,loading:l&&w.length===0})})]}),A.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"ðŸ’¡ Recommendations"}),k?e.jsx("div",{className:"text-center py-8",children:e.jsxs("p",{className:"text-red-600 dark:text-red-400",children:["Failed to load recommendations: ",k]})}):e.jsx(i,{media:H.slice(0,12),loading:S})]}),e.jsxs("div",{className:"flex space-x-1 mb-8",children:[e.jsx("button",{onClick:()=>v("trending"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${s==="trending"?"bg-red-600 text-white":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:"Top Airing"}),e.jsx("button",{onClick:()=>v("recent"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${s==="recent"?"bg-red-600 text-white":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:"ðŸ†• Recent Episodes"})]}),s==="trending"?e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Top Airing Anime"}),e.jsx(g,{onLoadMore:D,hasMore:L,loading:o,children:e.jsx(i,{media:E,loading:o&&E.length===0})})]}):s==="recent"?e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Recent Episodes"}),b?e.jsxs("div",{className:"text-center py-8",children:[e.jsxs("p",{className:"text-red-600 dark:text-red-400",children:["Failed to load recent episodes: ",b]}),e.jsx("button",{onClick:()=>r(p({page:1})),className:"mt-4 btn-primary",children:"Try again"})]}):e.jsx(g,{onLoadMore:B,hasMore:C,loading:n,children:e.jsx(i,{media:M,loading:n&&M.length===0})})]}):null]})})};export{ee as default};
