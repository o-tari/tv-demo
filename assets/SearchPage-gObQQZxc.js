import{u as b,a as x,l as k,m as l,j as e,n as S}from"./index-B7Om342z.js";import{d as y,r as c}from"./router-LUHdcDgl.js";import{V as N}from"./VideoGrid-DdCd2dI0.js";import{I as v}from"./InfiniteScroll-DhQ3_bQG.js";import{S as F}from"./SearchFilters-CAMwhiB8.js";import"./vendor-gH-7aFTg.js";import"./redux-uMWmO1IK.js";import"./utils-COe-vthL.js";import"./MediaGrid-B-CXhoQ4.js";import"./formatNumber-CanhB8v4.js";import"./formatTime-BiH8Yqa9.js";import"./LazyImage-qkvR2N8q.js";const z=()=>{const[p]=y(),t=b(),{searchFilters:u}=x(a=>a.ui),{searchResults:n,searchLoading:o,searchError:d,searchNextPageToken:i,searchTotalResults:h}=x(a=>a.videos),r=p.get("q")||"",[s,f]=c.useState(u);c.useEffect(()=>{r&&(t(k()),t(l({query:r,filters:s})))},[t,r,s]);const g=c.useCallback(()=>{r&&i&&!o&&t(l({query:r,filters:s,pageToken:i}))},[t,r,s,i,o]),j=a=>{const m={...s,...a};f(m),t(S(m))};return d?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-red-100 dark:bg-red-900 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-12 h-12 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Search failed"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:d}),e.jsx("button",{onClick:()=>t(l({query:r,filters:s})),className:"btn-primary",children:"Try again"})]}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:['Search results for "',r,'"']}),h>0&&e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["About ",h.toLocaleString()," results"]})]}),e.jsx("div",{className:"mb-6",children:e.jsx(F,{filters:s,onFilterChange:j})}),e.jsx(v,{onLoadMore:g,hasMore:!!i,loading:o,children:e.jsx(N,{videos:n,loading:o&&n.length===0,searchType:s.type,excludeShorts:s.excludeShorts})})]})};export{z as default};
