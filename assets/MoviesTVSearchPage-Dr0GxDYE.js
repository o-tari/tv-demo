import{a as m,_ as k,a4 as N,j as e,L as w,S}from"./index-B7Om342z.js";import{d as T,u as M,r as n}from"./router-LUHdcDgl.js";import{g as R}from"./YouTubePlayerModal-DQGrityt.js";import{T as B}from"./TMDBMediaCard-D-hjacgv.js";import"./vendor-gH-7aFTg.js";import"./redux-uMWmO1IK.js";import"./utils-COe-vthL.js";import"./formatNumber-CanhB8v4.js";import"./LazyImage-qkvR2N8q.js";const z=()=>{const[g]=T(),u=M(),a=m(k),o=m(N),t=g.get("search")||"",[i,c]=n.useState([]),[f,d]=n.useState(!1),[x,l]=n.useState(null),v=s=>{s.trim()&&u(`/movies-tv/search?search=${encodeURIComponent(s.trim())}`)},h=async s=>{if(!a||!s.trim()){c([]);return}d(!0),l(null);try{const r=R(a),[j,p]=await Promise.all([r.searchMovies(s),r.searchTV(s)]),y=r.filterByReleaseDate(j.results,o),b=r.filterByReleaseDate(p.results,o);c([...y,...b])}catch(r){l(r instanceof Error?r.message:"Failed to search movies and TV shows")}finally{d(!1)}};return n.useEffect(()=>{t&&a?h(t):t&&!a&&l("TMDB API key is required. Please configure your API key in settings.")},[t,a]),a?x?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-red-100 dark:bg-red-900 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-12 h-12 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Search failed"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:x}),e.jsx("button",{onClick:()=>h(t),className:"btn-primary",children:"Try again"})]}):f?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center",children:e.jsx(w,{})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Searching..."}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:['Finding movies and TV shows for "',t,'"']})]}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Movies & TV Search"}),e.jsx("div",{className:"max-w-2xl mb-4",children:e.jsx(S,{onSearch:v})}),t&&e.jsxs(e.Fragment,{children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:['Search Results for "',t,'"']}),i.length>0&&e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[i.length," results found"]})]})]}),t?i.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No results found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Try searching with different keywords"})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-6",children:i.map(s=>e.jsx(B,{id:s.id,title:"title"in s?s.title:s.name,thumbnail:s.poster_path,duration:null,viewCount:s.vote_count,publishedAt:"release_date"in s?s.release_date:s.first_air_date,channelTitle:null,type:"title"in s?"movie":"tv",rating:s.vote_average,overview:s.overview,content:s},`${s.id}-${"title"in s?"movie":"tv"}`))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Search Movies & TV Shows"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Enter a search term above to find movies and TV shows"})]})]}):e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-red-100 dark:bg-red-900 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-12 h-12 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"API Key Required"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Please configure your TMDB API key in settings to search movies and TV shows."}),e.jsx("a",{href:"/settings",className:"btn-primary",children:"Go to Settings"})]})};export{z as default};
