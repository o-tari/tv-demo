import{u as I,a as T,s as D,j as e,X as b,M as $,A as S,Y as M}from"./index-B7Om342z.js";import{a as L}from"./formatNumber-CanhB8v4.js";import{f as N}from"./formatTime-BiH8Yqa9.js";import{L as f}from"./LazyImage-qkvR2N8q.js";import{r as v,L as j}from"./router-LUHdcDgl.js";function E({title:t,titleId:r,...l},a){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":r},l),t?v.createElement("title",{id:r},t):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m15.75 10.5 4.72-4.72a.75.75 0 0 1 1.28.53v11.38a.75.75 0 0 1-1.28.53l-4.72-4.72M4.5 18.75h9a2.25 2.25 0 0 0 2.25-2.25v-9a2.25 2.25 0 0 0-2.25-2.25h-9A2.25 2.25 0 0 0 2.25 7.5v9a2.25 2.25 0 0 0 2.25 2.25Z"}))}const w=v.forwardRef(E),k=(t,r,l="anime",a="medium")=>{if(!t||t.trim()==="")return R(r,l,a);if(t.includes("zoro.to")||t.includes("hianime.to")){const i=A(a,l);return`https://images.weserv.nl/?url=${encodeURIComponent(t)}&w=${i.width}&h=${i.height}&fit=cover&output=webp`}return t},A=(t,r)=>{if(r==="anime"||r==="hianime")switch(t){case"small":return{width:200,height:280};case"medium":return{width:300,height:400};case"large":return{width:500,height:700}}else switch(t){case"small":return{width:200,height:112};case"medium":return{width:300,height:200};case"large":return{width:500,height:300}}},R=(t,r="anime",l="medium")=>{const a=encodeURIComponent(t),i=A(l,r);return r==="anime"||r==="hianime"?`https://via.placeholder.com/${i.width}x${i.height}/6366f1/ffffff?text=${a}`:`https://via.placeholder.com/${i.width}x${i.height}/ef4444/ffffff?text=${a}`},B=(t,r,l="medium")=>k(t,r,"anime",l),F=({media:t,variant:r="default",searchType:l,progress:a,showProgress:i=!1,onRemove:h,showRemoveButton:g=!1})=>{const u=I(),x=T(D(t.type==="video"?t.channelId:"")),p=s=>{const n=new Date,d=new Date(s),c=Math.floor((n.getTime()-d.getTime())/1e3);return c<60?"Just now":c<3600?`${Math.floor(c/60)} minutes ago`:c<86400?`${Math.floor(c/3600)} hours ago`:c<2592e3?`${Math.floor(c/86400)} days ago`:c<31536e3?`${Math.floor(c/2592e3)} months ago`:`${Math.floor(c/31536e3)} years ago`},o=s=>{s.preventDefault(),s.stopPropagation()},m=async s=>{if(s.preventDefault(),s.stopPropagation(),t.type==="video")try{const n=await u(S(t.channelId)).unwrap();u(M(n))}catch{const d={id:t.channelId,title:t.channelTitle,description:"",thumbnail:"",subscriberCount:"0",videoCount:"0",viewCount:"0"};u(M(d))}},y=()=>t.type==="video"?`/watch/${t.id}`:t.type==="hianime"?`/hianime/${t.id}`:`/anime/${t.id}`,W=s=>e.jsx(j,{to:y(),className:"block group max-w-sm",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(f,{src:s.image,alt:s.title,className:"w-full aspect-video object-cover rounded-lg",placeholder:e.jsx(w,{className:"w-12 h-12 text-gray-400"})}),e.jsx("span",{className:"absolute bottom-2 right-2 bg-black bg-opacity-80 text-white text-xs px-1.5 py-0.5 rounded",children:N(s.duration)}),i&&a!==void 0&&a>0&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gray-600 bg-opacity-50",children:e.jsx("div",{className:"h-full bg-red-600 transition-all duration-300",style:{width:`${Math.min(a,100)}%`}})}),l==="channel"&&e.jsx("button",{onClick:m,className:`absolute top-2 right-2 p-2 rounded-full transition-colors ${x?"bg-green-600 text-white":"bg-red-600 text-white hover:bg-red-700"}`,title:x?"Channel saved":"Add channel",children:x?e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),g&&h&&e.jsx("button",{onClick:n=>h(s.id,n),className:"absolute top-2 right-2 p-2 bg-red-600 hover:bg-red-700 rounded-full opacity-0 group-hover:opacity-100 transition-all duration-200 shadow-lg","aria-label":"Remove from Continue Watching",title:"Remove from Continue Watching",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white group-hover:text-red-600 dark:group-hover:text-red-400 line-clamp-2",children:s.title}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-300 dark:bg-gray-600 rounded-full flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("button",{onClick:o,className:"text-xs text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors truncate text-left",children:s.channelTitle}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:[L(s.viewCount)," • ",p(s.publishedAt)]})]})]})]})]})}),C=s=>{const n=B(s.image,s.title,"medium");return e.jsx(j,{to:y(),className:"block group max-w-sm",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(f,{src:n,alt:s.title,className:"w-full aspect-[3/4] object-cover rounded-lg",placeholder:e.jsx(b,{className:"w-12 h-12 text-gray-400"})}),e.jsxs("div",{className:"absolute bottom-2 right-2 flex flex-col gap-1",children:[s.totalEpisodes&&e.jsxs("span",{className:"bg-black bg-opacity-80 text-white text-xs px-1.5 py-0.5 rounded",children:[s.totalEpisodes," eps"]}),"score"in s&&s.score&&e.jsxs("span",{className:"bg-yellow-600 bg-opacity-90 text-white text-xs px-1.5 py-0.5 rounded",children:[e.jsx($,{className:"w-3 h-3 inline mr-1"})," ",s.score]}),"rating"in s&&s.rating&&e.jsxs("span",{className:"bg-yellow-600 bg-opacity-90 text-white text-xs px-1.5 py-0.5 rounded",children:[e.jsx($,{className:"w-3 h-3 inline mr-1"})," ",s.rating]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white group-hover:text-red-600 dark:group-hover:text-red-400 line-clamp-2",children:s.title}),e.jsxs("div",{className:"flex flex-col space-y-1",children:[s.genres&&s.genres.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1",children:s.genres.slice(0,2).map((d,c)=>e.jsx("span",{className:"text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 px-2 py-1 rounded",children:d},c))}),e.jsxs("div",{className:"flex flex-col space-y-1",children:[s.status&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:s.status}),"year"in s&&s.year&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:s.year}),s.rank&&e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:["Rank #",s.rank]})]})]})]})]})})};if(r==="compact"){const s=k(t.image,t.title,t.type,"small");return e.jsx(j,{to:y(),className:"block group max-w-md",children:e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx(f,{src:s,alt:t.title,className:"w-40 aspect-video object-cover rounded-lg",placeholder:t.type==="video"?e.jsx(w,{className:"w-12 h-12 text-gray-400"}):e.jsx(b,{className:"w-12 h-12 text-gray-400"})}),t.type==="video"&&"duration"in t&&e.jsx("span",{className:"absolute bottom-1 right-1 bg-black bg-opacity-80 text-white text-xs px-1 py-0.5 rounded",children:N(t.duration)}),i&&a!==void 0&&a>0&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gray-600 bg-opacity-50",children:e.jsx("div",{className:"h-full bg-red-600 transition-all duration-300",style:{width:`${Math.min(a,100)}%`}})}),g&&h&&e.jsx("button",{onClick:n=>h(t.id,n),className:"absolute top-2 right-2 p-2 bg-red-600 hover:bg-red-700 rounded-full opacity-0 group-hover:opacity-100 transition-all duration-200 shadow-lg","aria-label":"Remove from Continue Watching",title:"Remove from Continue Watching",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"flex-1 min-w-0 space-y-1",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white group-hover:text-red-600 dark:group-hover:text-red-400 line-clamp-2",children:t.title}),t.type==="video"&&"channelTitle"in t&&e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:t.channelTitle}),t.type==="anime"&&"genres"in t&&t.genres&&e.jsx("div",{className:"flex flex-wrap gap-1",children:t.genres.slice(0,2).map((n,d)=>e.jsx("span",{className:"text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 px-1 py-0.5 rounded",children:n},d))})]})]})})}if(r==="large"){const s=k(t.image,t.title,t.type,"large");return e.jsx(j,{to:y(),className:"block group max-w-lg",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(f,{src:s,alt:t.title,className:"w-full aspect-video object-cover rounded-lg",placeholder:t.type==="video"?e.jsx(w,{className:"w-12 h-12 text-gray-400"}):e.jsx(b,{className:"w-12 h-12 text-gray-400"})}),t.type==="video"&&"duration"in t&&e.jsx("span",{className:"absolute bottom-3 right-3 bg-black bg-opacity-80 text-white text-sm px-2 py-1 rounded",children:N(t.duration)}),i&&a!==void 0&&a>0&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gray-600 bg-opacity-50",children:e.jsx("div",{className:"h-full bg-red-600 transition-all duration-300",style:{width:`${Math.min(a,100)}%`}})}),g&&h&&e.jsx("button",{onClick:n=>h(t.id,n),className:"absolute top-2 right-2 p-2 bg-red-600 hover:bg-red-700 rounded-full opacity-0 group-hover:opacity-100 transition-all duration-200 shadow-lg","aria-label":"Remove from Continue Watching",title:"Remove from Continue Watching",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white group-hover:text-red-600 dark:group-hover:text-red-400 line-clamp-2",children:t.title}),t.type==="video"&&"channelTitle"in t&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-300 dark:bg-gray-600 rounded-full flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("button",{onClick:o,className:"text-sm text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors truncate text-left",children:t.channelTitle}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-500",children:[L(t.viewCount)," • ",p(t.publishedAt)]})]})]}),t.type==="anime"&&"genres"in t&&t.genres&&e.jsx("div",{className:"flex flex-wrap gap-2",children:t.genres.slice(0,3).map((n,d)=>e.jsx("span",{className:"text-sm bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 px-3 py-1 rounded-full",children:n},d))})]})]})})}return t.type==="video"?W(t):(t.type==="hianime",C(t))},V=({variant:t="default"})=>t==="compact"?e.jsxs("div",{className:"flex space-x-3 animate-pulse",children:[e.jsx("div",{className:"w-40 h-24 bg-gray-300 dark:bg-gray-600 rounded-lg flex-shrink-0"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded w-3/4"}),e.jsx("div",{className:"h-3 bg-gray-300 dark:bg-gray-600 rounded w-1/2"}),e.jsx("div",{className:"h-3 bg-gray-300 dark:bg-gray-600 rounded w-1/3"})]})]}):t==="large"?e.jsxs("div",{className:"space-y-4 animate-pulse",children:[e.jsx("div",{className:"w-full h-48 bg-gray-300 dark:bg-gray-600 rounded-lg"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-6 bg-gray-300 dark:bg-gray-600 rounded w-4/5"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-300 dark:bg-gray-600 rounded-full"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded w-1/2"}),e.jsx("div",{className:"h-3 bg-gray-300 dark:bg-gray-600 rounded w-1/3"})]})]})]})]}):e.jsxs("div",{className:"space-y-3 animate-pulse",children:[e.jsx("div",{className:"w-full aspect-video bg-gray-300 dark:bg-gray-600 rounded-lg"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded w-3/4"}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-300 dark:bg-gray-600 rounded-full flex-shrink-0"}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsx("div",{className:"h-3 bg-gray-300 dark:bg-gray-600 rounded w-1/2"}),e.jsx("div",{className:"h-3 bg-gray-300 dark:bg-gray-600 rounded w-1/3"})]})]})]})]}),X=({media:t,loading:r=!1,variant:l="default",searchType:a,videoProgress:i,showProgress:h=!1,onRemove:g,showRemoveButton:u=!1})=>{const x=()=>l==="compact"?"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5":l==="large"?"grid-cols-1 lg:grid-cols-2 xl:grid-cols-3":"grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6",p=()=>{switch(l){case"compact":return"gap-2";case"large":return"gap-6";default:return"gap-4"}};return r?e.jsx("div",{className:`grid ${x()} ${p()}`,children:Array.from({length:12}).map((o,m)=>e.jsx(V,{variant:l},m))}):t.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No media found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Try adjusting your search or filters"})]}):e.jsx("div",{className:`grid ${x()} ${p()}`,children:t.map((o,m)=>e.jsx(F,{media:o,variant:l,searchType:a,progress:o.type==="video"&&i?i[o.id]:void 0,showProgress:h&&o.type==="video",onRemove:g,showRemoveButton:u},`${o.id}-${m}`))})};export{X as M,B as g};
