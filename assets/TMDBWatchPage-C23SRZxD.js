import{j as e,a as A,a9 as H,L,u as ge,_ as me,a7 as xe,aa as he}from"./index-B7Om342z.js";import{r as l,e as ue,u as ye}from"./router-LUHdcDgl.js";import{g as R,Y as pe}from"./YouTubePlayerModal-DQGrityt.js";import{T as Y,t as $}from"./TorrentQueryInput-CD69RSfo.js";import{i as be,f as fe}from"./newEpisodeUtils-JBZCrWGO.js";import"./vendor-gH-7aFTg.js";import"./redux-uMWmO1IK.js";import"./utils-COe-vthL.js";const I=({searchResults:a,selectedTorrent:o,onTorrentSelect:y,onQueryChange:m,currentQuery:g="",className:f=""})=>{const[s,N]=l.useState(10),w=l.useCallback(()=>{N(d=>Math.min(d+10,a?.data.length||0))},[a?.data.length]);return l.useState(()=>{a?.data&&N(10)}),!a||!a.data||a.data.length===0?e.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-lg p-6 ${f}`,children:[m&&e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"No torrents found"}),e.jsx("div",{className:"w-80",children:e.jsx(Y,{initialQuery:g,onQueryChange:m,placeholder:"Modify search query...",debounceMs:500})})]})}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-gray-400 dark:text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 12h6m-6-4h6m2 5.291A7.962 7.962 0 0112 15c-2.34 0-4.29-1.009-5.824-2.709M15 12a3 3 0 11-6 0 3 3 0 016 0z"})})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No torrents found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No torrents were found for this search. Try adjusting your search terms or check back later."})]})]}):e.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-lg p-4 ${f}`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Found ",a.data.length," torrents"]}),m&&e.jsx("div",{className:"w-80",children:e.jsx(Y,{initialQuery:g,onQueryChange:m,placeholder:"Modify search query...",debounceMs:500})})]}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[e.jsx("th",{className:"text-left py-2 px-3 font-medium text-gray-900 dark:text-white",children:"Name"}),e.jsx("th",{className:"text-left py-2 px-3 font-medium text-gray-900 dark:text-white",children:"Size"}),e.jsx("th",{className:"text-left py-2 px-3 font-medium text-gray-900 dark:text-white",children:"Seeders"}),e.jsx("th",{className:"text-center py-2 px-3 font-medium text-gray-900 dark:text-white",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:a.data.slice(0,s).map((d,v)=>e.jsxs("tr",{onClick:()=>y?.(d),className:`hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer ${o?.magnet===d.magnet?"bg-green-50 dark:bg-green-900/10":""}`,children:[e.jsx("td",{className:"py-2 px-3",children:e.jsx("div",{className:"font-medium text-gray-900 dark:text-white truncate max-w-xs",title:d.name,children:d.name})}),e.jsx("td",{className:"py-2 px-3 text-gray-600 dark:text-gray-400",children:d.size}),e.jsx("td",{className:"py-2 px-3 text-gray-600 dark:text-gray-400",children:e.jsx("span",{className:"text-green-600 dark:text-green-400 font-medium",children:d.seeders})}),e.jsx("td",{className:"py-2 px-3 text-center",children:e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsx("button",{onClick:async()=>{try{await navigator.clipboard.writeText(d.magnet),alert("Magnet link copied to clipboard!")}catch(x){console.error("Failed to copy magnet:",x),alert("Failed to copy magnet link")}},className:"px-3 py-1 rounded text-xs font-medium transition-colors bg-blue-600 hover:bg-blue-700 text-white",children:"Copy"}),e.jsx("button",{onClick:()=>{console.log("Opening torrent with magnet:",d.name),console.log("Magnet URL:",d.magnet);const x=document.createElement("a");x.href=d.magnet,x.style.display="none",document.body.appendChild(x),x.click(),document.body.removeChild(x),window.open(d.magnet,"_blank")},className:"px-3 py-1 rounded text-xs font-medium transition-colors bg-green-600 hover:bg-green-700 text-white",children:"Play"})]})})]},v))})]}),a.data.length>s&&e.jsxs("div",{className:"mt-4 text-center",children:[e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:["Showing ",s," of ",a.data.length," torrents"]}),e.jsxs("button",{onClick:w,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-lg transition-colors",children:["Load More (",a.data.length-s," remaining)"]})]})]})]})},je=({isOpen:a,onClose:o,showTitle:y,seasonNumber:m})=>{const g=A(H),[f,s]=l.useState(null),[N,w]=l.useState(!1),[d,v]=l.useState(null);l.useEffect(()=>{a&&y&&m&&x()},[a,y,m]);const x=async()=>{if(!g){v("Torrent search endpoint not configured. Please configure it in settings."),w(!1);return}try{w(!0),v(null),console.log(" Searching for season torrents:",{show:y,season:m});const p=m.toString().padStart(2,"0"),S=`${y} s${p}`;console.log(" Season search query:",S);const T=await $.searchTorrents({site:"piratebay",query:S});console.log(" Season torrent search results:",T),s(T)}catch(p){console.error("❌ Error searching for season torrents:",p),v("Failed to search for torrents"),s(null)}finally{w(!1)}},j=p=>{console.log(" Season torrent selected:",p.name)};return a?e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:o}),e.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:["Search Results for ",y," Season ",m]}),e.jsx("button",{onClick:o,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 px-6 py-4",children:N?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(L,{}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Searching for torrents..."})]}):d?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-red-500 mb-4",children:e.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:d}),e.jsx("button",{onClick:x,className:"mt-4 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors",children:"Try Again"})]}):e.jsx("div",{children:e.jsx(I,{searchResults:f,selectedTorrent:null,onTorrentSelect:j})})}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 px-6 py-3 border-t border-gray-200 dark:border-gray-600",children:e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:o,className:"px-4 py-2 bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-300 rounded-lg transition-colors",children:"Close"})})})]})]})}):null},Le=()=>{const{id:a,type:o}=ue(),y=ye(),m=ge(),g=A(me),f=A(H),[s,N]=l.useState(null),[w,d]=l.useState(!0),[v,x]=l.useState(null),[j,p]=l.useState(1),[S,T]=l.useState([]),[J,B]=l.useState(!1),[n,E]=l.useState(null),[F,k]=l.useState(null),[Q,_]=l.useState(!1),[K,W]=l.useState(!1),[M,G]=l.useState(""),[z,X]=l.useState(!1),[Z,q]=l.useState(!1);l.useEffect(()=>{a&&o&&g&&ee()},[a,o,g]),l.useEffect(()=>{if(a&&o==="tv"&&g&&s){const t=localStorage.getItem(`tmdb-tv-${a}-selected-episode`);if(t)try{const r=JSON.parse(t);E(r),console.log("Restored saved episode from localStorage:",r.name)}catch(r){console.error("Error parsing saved episode data:",r)}}},[a,o,g,s]),l.useEffect(()=>{n&&s&&o==="tv"&&f&&(console.log("Auto-triggering torrent search for restored episode:",{show:s.name,season:n.season_number,episode:n.episode_number}),V(s,n))},[n,s,o,f]);const ee=async()=>{if(!(!a||!o||!g)){console.log(" TMDBWatchPage: Loading content...",{id:a,type:o}),d(!0),x(null);try{const t=R(g);if(o==="movie"){console.log(" Loading movie details for ID:",a);const r=await t.getMovieDetails(parseInt(a));console.log(" Movie loaded:",{title:r.title,year:r.release_date}),N(r),f&&re(r)}else{console.log(" Loading TV details for ID:",a);const r=await t.getTVDetails(parseInt(a));console.log(" TV show loaded:",{name:r.name,seasons:r.seasons?.length}),N(r);const i=localStorage.getItem(`tmdb-tv-${a}-selected-episode`);if(i)try{const c=JSON.parse(i);c.season_number?(console.log(" Found saved episode, setting season to:",c.season_number),p(c.season_number),C(c.season_number)):r.seasons&&r.seasons.length>0&&(p(r.seasons[0].season_number),C(r.seasons[0].season_number))}catch(c){console.error("Error parsing saved episode data in loadContent:",c),r.seasons&&r.seasons.length>0&&(p(r.seasons[0].season_number),C(r.seasons[0].season_number))}else r.seasons&&r.seasons.length>0&&(p(r.seasons[0].season_number),C(r.seasons[0].season_number))}}catch(t){console.error("❌ Error loading content:",t),x("Failed to load content details")}finally{d(!1)}}},C=async t=>{if(!(!a||!g||o!=="tv")){console.log(" Loading episodes for season:",t),B(!0);try{const i=await R(g).getSeasonDetails(parseInt(a),t);if(console.log(" Episodes loaded:",i.episodes?.length||0),T(i.episodes||[]),n&&n.season_number===t){const c=i.episodes?.find(u=>u.episode_number===n.episode_number);c&&(console.log(" Restored saved episode:",c.name),E(c))}}catch(r){console.error("❌ Error loading episodes:",r),T([])}finally{B(!1)}}},te=t=>{p(t),C(t)},se=t=>{console.log(" Episode selected:",{name:t.name,season:t.season_number,episode:t.episode_number}),E(t),a&&o==="tv"&&(localStorage.setItem(`tmdb-tv-${a}-selected-episode`,JSON.stringify(t)),console.log(" Episode saved to localStorage")),s&&o==="tv"&&(m(xe({content:s,type:"tv"})),console.log(" Added to continue watching")),a&&o==="tv"&&t.air_date&&(m(he({itemId:`tv-${a}`,seasonNumber:t.season_number,episodeNumber:t.episode_number,airDate:t.air_date})),console.log(" Updated last watched episode for new episode detection")),s&&o==="tv"&&V(s,t)},V=async(t,r)=>{if(!f){console.log(" Torrent endpoint not configured, skipping torrent search"),k(null);return}try{_(!0),console.log(" Searching for episode torrents:",{show:t.name,season:r.season_number,episode:r.episode_number,totalEpisodes:t.number_of_episodes,genres:t.genres.map(b=>b.name)});const i=t.genres.some(b=>b.name.toLowerCase().includes("animation")||b.name.toLowerCase().includes("anime")),c=t.number_of_episodes>100;console.log(" Show analysis:",{isAnimation:i,isLongRunning:c,totalEpisodes:t.number_of_episodes,genres:t.genres.map(b=>b.name)});let u;if(i&&c){const b=`${t.name} ${r.episode_number}`;console.log(" Long-running animation search query:",b),console.log(' Using format: "Show Name EpisodeNumber" (no season)'),u=await $.searchTorrents({site:"piratebay",query:b})}else{const b=r.season_number.toString().padStart(2,"0"),ce=r.episode_number.toString().padStart(2,"0"),de=`${t.name} s${b}e${ce}`;console.log(" Regular TV show search query:",de),console.log(' Using format: "Show Name S##E##" (with season)'),u=await $.searchTVTorrents(t.name,r.season_number,r.episode_number,"piratebay")}console.log(" Torrent search results:",u),k(u)}catch(i){console.error("❌ Error searching for episode torrents:",i),k(null)}finally{_(!1)}},re=async t=>{if(!f){console.log(" Torrent endpoint not configured, skipping torrent search"),k(null);return}try{_(!0),console.log(" Searching for movie torrents:",{movie:t.title,year:t.release_date?new Date(t.release_date).getFullYear():"Unknown",genres:t.genres.map(u=>u.name)});const r=t.release_date?new Date(t.release_date).getFullYear():"",i=r?`${t.title} ${r}`:t.title;console.log(" Movie search query:",i);const c=await $.searchTorrents({site:"piratebay",query:i});console.log(" Movie torrent search results:",c),k(c)}catch(r){console.error("❌ Error searching for movie torrents:",r),k(null)}finally{_(!1)}},ae=()=>{if(!s?.videos?.results)return null;const t=s.videos.results.filter(r=>r.type==="Trailer"&&r.site==="YouTube");return t.length>0?t[0]:null},P=l.useCallback(async t=>{if(G(t),X(!0),!(!t.trim()||!s)){_(!0);try{const r=await $.searchTorrents({site:"piratebay",query:t.trim()});console.log(" Custom torrent search results:",r),k(r)}catch(r){console.error("❌ Error searching with custom query:",r),k(null)}finally{_(!1)}}},[s]),O=l.useCallback(()=>{if(z&&M)return M;if(n&&s&&"name"in s){const t=s,r=t.genres?.some(c=>c.name==="Animation"),i=t.number_of_seasons>3;if(r&&i)return`${t.name} ${n.episode_number}`;{const c=n.season_number.toString().padStart(2,"0"),u=n.episode_number.toString().padStart(2,"0");return`${t.name} s${c}e${u}`}}if(s&&"title"in s){const t=s,r=t.release_date?new Date(t.release_date).getFullYear():"";return r?`${t.title} ${r}`:t.title}return""},[z,M,n,s]),ne=t=>{const r=Math.floor(t/60),i=t%60;return r>0?`${r}h ${i}m`:`${i}m`},U=t=>new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),oe=()=>{if(!s)return"";if(o==="tv"&&n){const t=s.name,r=n.season_number.toString().padStart(2,"0"),i=n.episode_number.toString().padStart(2,"0");return`https://1337x.to/search/${`${t.toLowerCase().replace(/[^a-z0-9]/g,"+").replace(/\++/g,"+")}+s${r}e${i}`}/1/`}else if(o==="movie")return`https://1337x.to/search/${s.title.toLowerCase().replace(/[^a-z0-9]/g,"+").replace(/\++/g,"+")}/1/`;return""},le=()=>s?o==="tv"?`https://1337x.to/search/${s.name.toLowerCase().replace(/[^a-z0-9]/g,"+").replace(/\++/g,"+")}/1/`:o==="movie"?`https://1337x.to/search/${s.title.toLowerCase().replace(/[^a-z0-9]/g,"+").replace(/\++/g,"+")}/1/`:"":"",ie=t=>{if(!s||o!=="tv")return"";const r=s.name,i=t.toString().padStart(2,"0");return`https://1337x.to/search/${`${r.toLowerCase().replace(/[^a-z0-9]/g,"+").replace(/\++/g,"+")}+s${i}`}/1/`};if(!g)return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:"TMDB API Key Required"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-lg mb-8",children:"Please configure your TMDB API key in settings to watch content."}),e.jsx("button",{onClick:()=>y("/settings"),className:"inline-flex items-center px-6 py-3 bg-red-600 hover:bg-red-700 text-white font-semibold rounded-lg transition-colors",children:"Go to Settings"})]})})});if(w)return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:e.jsx(L,{})});if(v||!s)return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:v||"Content not found"}),e.jsx("button",{onClick:()=>y("/movies-tv"),className:"inline-flex items-center px-6 py-3 bg-red-600 hover:bg-red-700 text-white font-semibold rounded-lg transition-colors",children:"Back to Movies & TV"})]})})});const D=ae(),h=o==="tv";return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[e.jsxs("button",{onClick:()=>y("/movies-tv"),className:"mb-6 flex items-center text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Movies & TV"]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2",children:[h&&n&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Selected Episode"}),e.jsx("a",{href:oe(),target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center w-10 h-10 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors",title:`Search for ${s.name} S${n.season_number.toString().padStart(2,"0")}E${n.episode_number.toString().padStart(2,"0")} on 1337x`,children:e.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})})]}),e.jsxs("div",{className:"flex items-start space-x-4",children:[n.still_path&&e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:`https://image.tmdb.org/t/p/w300${n.still_path}`,alt:n.name,className:"w-32 h-20 object-cover rounded-lg"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:["Episode ",n.episode_number]}),e.jsxs("span",{className:"px-2 py-1 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded text-sm font-medium",children:["S",n.season_number,"E",n.episode_number]})]}),e.jsx("div",{className:"flex items-center space-x-4 mb-3 text-sm text-gray-500 dark:text-gray-400",children:n.air_date&&e.jsx("span",{children:U(n.air_date)})})]})]}),Q?e.jsxs("div",{className:"mt-6 flex items-center justify-center py-8",children:[e.jsx(L,{}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Searching for torrents..."})]}):e.jsx("div",{className:"mt-6",children:e.jsx(I,{searchResults:F,selectedTorrent:null,onTorrentSelect:t=>{console.log(" Torrent selected:",t.name)},onQueryChange:P,currentQuery:O()})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:h?s.name:s.title}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-yellow-500 mr-1",children:"★"}),e.jsx("span",{className:"text-gray-900 dark:text-white font-semibold",children:s.vote_average.toFixed(1)}),e.jsxs("span",{className:"text-gray-500 dark:text-gray-400 ml-1",children:["(",s.vote_count," votes)"]})]}),h&&"number_of_seasons"in s&&e.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:[s.number_of_seasons," season",s.number_of_seasons!==1?"s":""]}),!h&&"runtime"in s&&e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:ne(s.runtime)}),e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:U(h?s.first_air_date:s.release_date)})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:s.genres.map(t=>e.jsx("span",{className:"px-3 py-1 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-full text-sm",children:t.name},t.id))}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:s.overview})]}),!h&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 mt-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Torrents"}),Q?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(L,{}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Searching for torrents..."})]}):e.jsx(I,{searchResults:F,selectedTorrent:null,onTorrentSelect:t=>{console.log(" Torrent selected:",t.name)},onQueryChange:P,currentQuery:O()})]})]}),e.jsxs("div",{className:"space-y-6",children:[h&&"seasons"in s&&s.seasons&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Seasons & Episodes"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex flex-wrap gap-2",children:s.seasons.slice().reverse().map(t=>e.jsxs("button",{onClick:()=>te(t.season_number),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all ${j===t.season_number?"bg-red-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:["Season ",t.season_number]},t.id))}),j!==null&&e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:J?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(L,{}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Loading episodes..."})]}):S.length>0?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 dark:text-white",children:["Season ",j," Episodes (",S.length,")"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>W(!0),className:"inline-flex items-center justify-center w-8 h-8 bg-blue-200 dark:bg-blue-600 hover:bg-blue-300 dark:hover:bg-blue-500 rounded-lg transition-colors",title:`Search torrents for Season ${j}`,children:e.jsx("svg",{className:"w-4 h-4 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("a",{href:ie(j),target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center w-8 h-8 bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500 rounded-lg transition-colors",title:`Search for Season ${j} on 1337x`,children:e.jsx("svg",{className:"w-4 h-4 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:S.slice().reverse().map(t=>{const r=be(t.air_date);return e.jsx("button",{onClick:()=>!r&&se(t),disabled:r,className:`w-12 h-12 rounded-lg border-2 flex items-center justify-center text-sm font-medium transition-all ${r?"bg-gray-100 dark:bg-gray-700 text-gray-400 dark:text-gray-500 border-gray-200 dark:border-gray-600 cursor-not-allowed":n?.id===t.id?"bg-red-600 text-white border-red-600":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700"}`,title:`Episode ${t.episode_number}${t.air_date?` - ${r?"Airs":"Aired"} ${fe(t.air_date)}`:""}`,children:t.episode_number},t.id)})})]}):e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center py-4",children:"No episodes available"})})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("img",{src:`https://image.tmdb.org/t/p/w500${s.poster_path}`,alt:h?s.name:s.title,className:"w-full max-w-xs rounded-lg shadow-lg"})}),D&&e.jsx("div",{className:"flex justify-center mb-4",children:e.jsxs("button",{onClick:()=>q(!0),className:"inline-flex items-center px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-semibold rounded-lg transition-colors",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M8 5v14l11-7z"})}),"Watch Trailer"]})}),e.jsx("div",{className:"flex justify-end",children:e.jsx("a",{href:le(),target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center w-10 h-10 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors",title:`Search for ${h?s.name:s.title} on 1337x`,children:e.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Additional Info"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Status"}),e.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:s.status})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Language"}),e.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:s.original_language.toUpperCase()})]}),h&&"origin_country"in s&&s.origin_country.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Country"}),e.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:s.origin_country.join(", ")})]})]})]})]})]})]}),h&&s&&e.jsx(je,{isOpen:K,onClose:()=>W(!1),showTitle:s.name,seasonNumber:j}),e.jsx(pe,{isOpen:Z,onClose:()=>q(!1),videoId:D?.key||null,title:D?`Trailer - ${h?s.name:s.title}`:void 0})]})};export{Le as default};
