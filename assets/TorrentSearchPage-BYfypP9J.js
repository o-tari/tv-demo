import{j as e,a as C,ab as F,ac as U,a9 as D,L as Q}from"./index-D07yTCoG.js";import{r as s}from"./router-LUHdcDgl.js";import{g as $,a as N,e as H,d as q,i as V,b as G,c as W,s as K,t as M,T as O,f as Y}from"./TorrentQueryInput-B4ljBZYD.js";import"./vendor-gH-7aFTg.js";import"./redux-uMWmO1IK.js";import"./utils-COe-vthL.js";const _=({onProviderChange:d})=>{const[v,h]=s.useState([]),[j,i]=s.useState([]),[u,l]=s.useState(!1),[g,a]=s.useState(null);s.useEffect(()=>{w()},[]);const w=async()=>{l(!0),a(null);try{const r=$(),o=N();h(r),i(o)}catch(r){a("Failed to load providers"),console.error("Error loading providers:",r)}finally{l(!1)}},p=async r=>{l(!0),a(null);try{V(r.name)?G(r.name)&&i(x=>x.filter(S=>S.name!==r.name)):W(r.name)&&i(x=>[...x,r]),d?.()}catch(o){a(`Failed to toggle provider ${r.name}`),console.error("Error toggling provider:",o)}finally{l(!1)}},k=async()=>{l(!0),a(null);try{if(H()){const o=N();i(o),d?.()}}catch(r){a("Failed to enable all public providers"),console.error("Error enabling all public providers:",r)}finally{l(!1)}},P=async()=>{l(!0),a(null);try{q()&&(i([]),d?.())}catch(r){a("Failed to disable all providers"),console.error("Error disabling all providers:",r)}finally{l(!1)}},b=r=>j.some(o=>o.name===r);return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Torrent Providers"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:k,disabled:u,className:"bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white text-sm font-medium py-1 px-3 rounded-md transition-colors",children:"Enable All Public"}),e.jsx("button",{onClick:P,disabled:u,className:"bg-red-600 hover:bg-red-700 disabled:bg-gray-400 text-white text-sm font-medium py-1 px-3 rounded-md transition-colors",children:"Disable All"})]})]}),g&&e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border-l-4 border-red-400 p-3 mb-4",children:e.jsx("p",{className:"text-red-700 dark:text-red-300 text-sm",children:g})}),u&&e.jsx("div",{className:"flex justify-center py-4",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"})}),e.jsx("div",{className:"space-y-3",children:v.map(r=>e.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 dark:border-gray-600 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:r.name}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${r.public?"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200":"bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200"}`,children:r.public?"Public":"Private"}),b(r.name)&&e.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200",children:"Active"})]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Categories: ",r.categories.join(", ")]})]}),e.jsx("button",{onClick:()=>p(r),disabled:u,className:`ml-4 px-4 py-2 text-sm font-medium rounded-md transition-colors ${b(r.name)?"bg-red-600 hover:bg-red-700 text-white":"bg-blue-600 hover:bg-blue-700 text-white"} disabled:bg-gray-400`,children:b(r.name)?"Disable":"Enable"})]},r.name))}),e.jsxs("div",{className:"mt-4 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Active Providers:"})," ",j.length," of ",v.length]}),e.jsx("p",{className:"mt-1",children:"Public providers are free to use. Private providers may require authentication."})]})]})},Z=[{id:"piratebay",name:"PirateBay",url:"https://thepiratebay10.org",status:" "},{id:"1337x",name:"1337x",url:"https://1337x.to",status:" "},{id:"tgx",name:"Torrent Galaxy",url:"https://torrentgalaxy.to",status:" "},{id:"torlock",name:"Torlock",url:"https://www.torlock.com",status:" "},{id:"nyaasi",name:"Nyaasi",url:"https://nyaa.si",status:" "},{id:"zooqle",name:"Zooqle",url:"https://zooqle.com",status:" "},{id:"kickass",name:"KickAss",url:"https://kickasstorrents.to",status:" "},{id:"bitsearch",name:"Bitsearch",url:"https://bitsearch.to",status:" "},{id:"magnetdl",name:"MagnetDL",url:"https://www.magnetdl.com",status:" "},{id:"libgen",name:"Libgen",url:"https://libgen.is",status:" "},{id:"yts",name:"YTS",url:"https://yts.mx",status:" "},{id:"limetorrent",name:"Limetorrent",url:"https://www.limetorrents.pro",status:" "},{id:"torrentfunk",name:"TorrentFunk",url:"https://www.torrentfunk.com",status:" "},{id:"glodls",name:"Glodls",url:"https://glodls.to",status:" "},{id:"torrentproject",name:"TorrentProject",url:"https://torrentproject2.com",status:" "},{id:"ybt",name:"YourBitTorrent",url:"https://yourbittorrent.com",status:" "}],ae=()=>{const[d,v]=s.useState(""),[h,j]=s.useState(""),[i,u]=s.useState("piratebay"),[l,g]=s.useState([]),[a,w]=s.useState(!1),[p,k]=s.useState(null),[P,b]=s.useState([]),[r,o]=s.useState(!1),m=C(F),x=C(U),S=C(D);s.useEffect(()=>{const t=N();b(t.map(n=>n.name))},[]);const E=()=>{const t=N();b(t.map(n=>n.name))},T=s.useCallback(async t=>{const n=t||d.trim();if(n){w(!0),k(null);try{if(m){const f=await K({query:n,limit:50,providers:h?[h]:void 0});g(f.torrents)}else{M.setBaseUrl(x);const f=(await M.searchTorrents({site:i,query:n})).data.map((c,B)=>({id:`${i}-${B}-${Date.now()}`,title:c.name,provider:i,time:c.date,size:c.size,seeds:parseInt(c.seeders)||0,peers:parseInt(c.leechers)||0,magnet:c.magnet,category:c.category,url:c.url,infoHash:c.hash,uploader:c.uploader}));g(f)}}catch(y){const f=y instanceof Error?y.message:"Failed to search torrents. Please try again.";k(f),console.error("Search error:",y)}finally{w(!1)}}},[d,h,i,m,x]),A=s.useCallback((()=>{let t;return n=>{clearTimeout(t),t=setTimeout(()=>{T(n)},500)}})(),[T]),L=s.useCallback(t=>{v(t),t.trim()?A(t):g([])},[A]),z=async t=>{try{if(m){const n=await Y(t);n?(await navigator.clipboard.writeText(n),alert("Magnet link copied to clipboard!")):alert("Failed to get magnet link")}else t.magnet?(await navigator.clipboard.writeText(t.magnet),alert("Magnet link copied to clipboard!")):alert("No magnet link available for this torrent")}catch(n){console.error("Error getting magnet:",n),alert("Failed to get magnet link")}},I=t=>!t||t==="Unknown"?"Unknown":t,R=t=>t>=1e3?`${(t/1e3).toFixed(1)}K`:t.toString();return S?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Torrent Search"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Search torrents across multiple providers"})]}),e.jsx("button",{onClick:()=>o(!0),className:"bg-gray-600 hover:bg-gray-700 text-white font-medium py-2 px-4 rounded-md transition-colors",children:"Manage Providers"})]}),m?e.jsx("div",{className:"mt-4 bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-400 p-4",children:e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[e.jsx("strong",{children:"Demo Mode:"})," This is a demonstration using mock data. In a production app, you would integrate with actual torrent search APIs or implement web scraping for real torrent sites."]})}):e.jsx("div",{className:"mt-4 bg-green-50 dark:bg-green-900/20 border-l-4 border-green-400 p-4",children:e.jsxs("p",{className:"text-sm text-green-700 dark:text-green-300",children:[e.jsx("strong",{children:"API Mode:"})," Using real torrent search API at ",e.jsx("code",{className:"bg-gray-100 dark:bg-gray-800 px-1 rounded",children:x}),". Select a torrent site from the dropdown above to search."]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 mb-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Search Query"}),e.jsx(O,{initialQuery:d,onQueryChange:L,placeholder:"Enter search terms...",debounceMs:500})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Torrent Site"}),e.jsx("select",{value:i,onChange:t=>u(t.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:Z.map(t=>e.jsxs("option",{value:t.id,children:[t.name," ",t.status]},t.id))})]}),m&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Provider"}),e.jsxs("select",{value:h,onChange:t=>j(t.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Providers"}),P.map(t=>e.jsx("option",{value:t,children:t},t))]})]})]}),e.jsx("div",{className:"mt-4",children:e.jsx("button",{onClick:()=>T(),disabled:a||!d.trim(),className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-medium py-2 px-6 rounded-md transition-colors",children:a?"Searching...":"Search Torrents"})})]}),p&&e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border-l-4 border-red-400 p-4 mb-6",children:[e.jsx("p",{className:"text-red-700 dark:text-red-300",children:p}),p.includes("API endpoint")&&e.jsx("div",{className:"mt-2",children:e.jsx("a",{href:"/settings",className:"inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700",children:"Open Settings"})})]}),a&&e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(Q,{})}),!a&&l.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:["Search Results (",l.length,")"]})}),e.jsx("div",{className:"space-y-3",children:l.map(t=>e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2 line-clamp-2",children:t.title}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-600 dark:text-gray-400 mb-3",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zm0 4a1 1 0 011-1h12a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1V8z",clipRule:"evenodd"})}),t.provider]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1v-2z",clipRule:"evenodd"})}),I(t.size)]}),e.jsxs("span",{className:"flex items-center text-green-600 dark:text-green-400",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),R(t.seeds)," seeds"]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"})}),t.time]})]})]}),e.jsxs("div",{className:"ml-4 flex flex-col gap-2",children:[e.jsx("button",{onClick:()=>z(t),className:"bg-green-600 hover:bg-green-700 text-white text-sm font-medium py-2 px-4 rounded-md transition-colors",children:"Copy Magnet"}),t.url&&e.jsx("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"bg-gray-600 hover:bg-gray-700 text-white text-sm font-medium py-2 px-4 rounded-md transition-colors text-center",children:"View Details"})]})]})},t.id))})]}),!a&&l.length===0&&d&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No torrents found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:m?"Try adjusting your search terms or category.":"Try adjusting your search terms or selecting a different torrent site."})]}),!a&&l.length===0&&!d&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"Search for torrents"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Enter a search term above to find torrents across multiple providers."})]}),r&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Torrent Provider Manager"}),e.jsx("button",{onClick:()=>o(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx(_,{onProviderChange:E})]})})})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-yellow-100 dark:bg-yellow-900 mb-4",children:e.jsx("span",{className:"text-2xl",children:"⚠️"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:"Torrent Search Not Configured"}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400 mb-6",children:"Please configure a torrent search API endpoint in settings to use this feature."}),e.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900 border border-yellow-200 dark:border-yellow-700 rounded-lg p-6 max-w-2xl mx-auto",children:[e.jsx("h3",{className:"text-lg font-semibold text-yellow-800 dark:text-yellow-200 mb-2",children:"How to configure:"}),e.jsxs("ol",{className:"text-left text-yellow-700 dark:text-yellow-300 space-y-2",children:[e.jsx("li",{children:"1. Go to Settings"}),e.jsx("li",{children:'2. Find the "Torrent API URL" field'}),e.jsx("li",{children:"3. Enter your torrent search API endpoint URL"}),e.jsx("li",{children:"4. Save the settings"})]})]})]})})})};export{ae as default};
