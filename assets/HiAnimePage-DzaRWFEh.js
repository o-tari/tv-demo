import{u as b,a as u,Q as A,j as e,M as N,R as k,T as w,S as C}from"./index-Dl-wv5iU.js";import{r as x,L as M}from"./router-LUHdcDgl.js";import{h as a}from"./hianime-F0r3trgY.js";import{g as L,M as i}from"./MediaGrid-2cSuzQlp.js";import{L as T}from"./LazyImage-CDXRRbks.js";import"./vendor-gH-7aFTg.js";import"./redux-uMWmO1IK.js";import"./utils-COe-vthL.js";import"./formatNumber-CanhB8v4.js";import"./formatTime-BiH8Yqa9.js";const H=({limit:r,showMoreButton:t=!1,onMoreClick:h})=>{const g=b(),n=u(A),[d,c]=x.useState(!1),m=r&&!d?n.slice(0,r):n,p=r?n.length>r:!1,l=(s,o)=>{o.preventDefault(),o.stopPropagation(),console.log("Removing HiAnime from continue watching:",s),g(k(s))},j=()=>{h?h():c(!d)},f=(s,o)=>L(s,o,"medium"),y=s=>`/hianime/${s.id}`;return n.length===0?null:e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"▶️ Continue Watching HiAnime"}),p&&t&&e.jsx("button",{onClick:j,className:"text-sm text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 font-medium",children:d?"Show Less":"More"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-4",children:m.map(s=>e.jsxs("div",{className:"relative group",children:[e.jsx(M,{to:y(s),children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(T,{src:f(s.image,s.title),alt:s.title,className:"w-full aspect-[3/4] object-cover rounded-lg",placeholder:"🎌"}),e.jsxs("div",{className:"absolute bottom-2 right-2 flex flex-col gap-1",children:[s.totalEpisodes&&e.jsxs("span",{className:"bg-black bg-opacity-80 text-white text-xs px-1.5 py-0.5 rounded",children:[s.totalEpisodes," eps"]}),s.rating&&e.jsxs("span",{className:"bg-yellow-600 bg-opacity-90 text-white text-xs px-1.5 py-0.5 rounded",children:[e.jsx(N,{className:"w-3 h-3 inline mr-1"})," ",s.rating]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white group-hover:text-red-600 dark:group-hover:text-red-400 line-clamp-2",children:s.title}),e.jsxs("div",{className:"flex flex-col space-y-1",children:[s.genres&&s.genres.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1",children:s.genres.slice(0,2).map((o,v)=>e.jsx("span",{className:"text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 px-2 py-1 rounded",children:o},v))}),e.jsxs("div",{className:"flex flex-col space-y-1",children:[s.animeType&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:s.animeType}),s.duration&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:s.duration}),s.rank&&e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:["Rank #",s.rank]})]})]})]})]})}),e.jsx("button",{onClick:o=>l(s.id,o),className:"absolute top-2 right-2 p-2 bg-red-600 hover:bg-red-700 rounded-full opacity-0 group-hover:opacity-100 transition-all duration-200 shadow-lg","aria-label":"Remove from Continue Watching",title:"Remove from Continue Watching",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},s.id))})]})},K=()=>{const r=u(w),[t,h]=x.useState(null),[g,n]=x.useState(!0),[d,c]=x.useState(null);x.useEffect(()=>{if(!r){c("HiAnime API key is not configured. Please add your API key in Settings."),n(!1);return}a.setApiKey(r),m()},[r]);const m=async()=>{try{n(!0),c(null);const l=await a.getHomeData();h(l)}catch(l){c(l instanceof Error?l.message:"Failed to load HiAnime data")}finally{n(!1)}},p=()=>{a.clearCache(),m()};return g?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-12 h-12 text-gray-400 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Loading HiAnime data..."}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Please wait while we fetch the latest anime content"})]}):d?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-red-100 dark:bg-red-900 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-12 h-12 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:d}),e.jsx("button",{onClick:m,className:"btn-primary",children:"Try again"})]}):t?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"HiAnime"}),e.jsx("button",{onClick:p,className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors text-sm",children:"Clear Cache"})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Search Anime"}),e.jsx("div",{className:"max-w-2xl",children:e.jsx(C,{searchPath:"/hianime/search"})})]}),e.jsxs("div",{className:"space-y-12",children:[e.jsx(H,{limit:6}),t?.spotlightAnimes&&t.spotlightAnimes.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Spotlight Animes"}),e.jsx(i,{media:t.spotlightAnimes.map(a.convertSpotlightToMedia),loading:!1})]}),t?.trendingAnimes&&t.trendingAnimes.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Trending Animes"}),e.jsx(i,{media:t.trendingAnimes.map(a.convertTrendingToMedia),loading:!1})]}),t?.latestEpisodeAnimes&&t.latestEpisodeAnimes.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"🆕 Latest Episodes"}),e.jsx(i,{media:t.latestEpisodeAnimes.map(a.convertLatestEpisodeToMedia),loading:!1})]}),t?.topUpcomingAnimes&&t.topUpcomingAnimes.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Upcoming Animes"}),e.jsx(i,{media:t.topUpcomingAnimes.map(a.convertUpcomingToMedia),loading:!1})]}),t?.top10Animes?.today&&t.top10Animes.today.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Top 10 Today"}),e.jsx(i,{media:t.top10Animes.today.map(a.convertTop10ToMedia),loading:!1})]}),t?.topAiringAnimes&&t.topAiringAnimes.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Top Airing Anime"}),e.jsx(i,{media:t.topAiringAnimes.map(a.convertTopAiringToMedia),loading:!1})]}),t?.mostPopularAnimes&&t.mostPopularAnimes.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Most Popular"}),e.jsx(i,{media:t.mostPopularAnimes.map(a.convertMostPopularToMedia),loading:!1})]}),t?.mostFavoriteAnimes&&t.mostFavoriteAnimes.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"❤️ Most Favorite"}),e.jsx(i,{media:t.mostFavoriteAnimes.map(a.convertMostFavoriteToMedia),loading:!1})]}),t?.latestCompletedAnimes&&t.latestCompletedAnimes.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"✅ Latest Completed"}),e.jsx(i,{media:t.latestCompletedAnimes.map(a.convertLatestCompletedToMedia),loading:!1})]}),t?.genres&&t.genres.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Available Genres"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.genres.map((l,j)=>e.jsx("span",{className:"px-3 py-1 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-full text-sm hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors cursor-pointer",children:l},j))})]})]})]})}):e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"No data available"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Unable to load HiAnime data"})]})};export{K as default};
