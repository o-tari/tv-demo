import{a as p,T as k,j as e,L as b,S as N}from"./index-Dl-wv5iU.js";import{d as v,u as w,r as i}from"./router-LUHdcDgl.js";import{h as d}from"./hianime-F0r3trgY.js";import{M as S}from"./MediaGrid-2cSuzQlp.js";import"./vendor-gH-7aFTg.js";import"./redux-uMWmO1IK.js";import"./utils-COe-vthL.js";import"./formatNumber-CanhB8v4.js";import"./formatTime-BiH8Yqa9.js";import"./LazyImage-CDXRRbks.js";const z=()=>{const[h]=v(),g=w(),r=p(k),t=h.get("search")||"",[a,n]=i.useState([]),[u,o]=i.useState(!1),[m,c]=i.useState(null),f=s=>{s.trim()&&g(`/hianime/search?search=${encodeURIComponent(s.trim())}`)};i.useEffect(()=>{t&&r?x(t):t&&!r&&c("HiAnime API key is required. Please configure your API key in settings.")},[t,r]);const x=async s=>{if(!r||!s.trim()){n([]);return}o(!0),c(null);try{d.setApiKey(r);const j=(await d.searchAnime(s)).animes.map(y=>d.convertSearchAnimeToMedia(y));n(j)}catch(l){c(l instanceof Error?l.message:"Failed to search anime"),n([])}finally{o(!1)}};return r?m?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-red-100 dark:bg-red-900 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-12 h-12 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Search failed"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:m}),e.jsx("button",{onClick:()=>x(t),className:"btn-primary",children:"Try again"})]}):u?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center",children:e.jsx(b,{})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Searching..."}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:['Finding anime for "',t,'"']})]}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"HiAnime Search"}),e.jsx("div",{className:"max-w-2xl mb-4",children:e.jsx(N,{onSearch:f})}),t&&e.jsxs(e.Fragment,{children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:['Search Results for "',t,'"']}),a.length>0&&e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[a.length," results found"]})]})]}),t?a.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No anime found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Try searching with different keywords"})]}):e.jsx(S,{media:a}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Search HiAnime"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Enter a search term above to find anime"})]})]}):e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-red-100 dark:bg-red-900 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-12 h-12 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"API Key Required"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Please configure your HiAnime API key in settings to search anime."}),e.jsx("a",{href:"/settings",className:"btn-primary",children:"Go to Settings"})]})};export{z as default};
